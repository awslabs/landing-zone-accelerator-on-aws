{
    "Metadata": {
        "lzaLookup": {
            "accountName": "testAccount",
            "region": "test"
        }
    },
    "Resources": {
        "TestVPC": {
            "Type": "AWS::EC2::VPC",
            "Properties": {
                "CidrBlock": "10.0.0.0/16",
                "EnableDnsSupport": true,
                "EnableDnsHostnames": true
            },
            "Metadata": {
                "lzaLookup": {
                    "vpcName": "test-vpc"
                }
            }
        },
        "TestCidr": {
            "Type": "AWS::EC2::VPCCidrBlock",
            "Properties": {
                "VpcId": {
                    "Ref": "TestVPC"
                },
                "CidrBlock": "10.1.0.0/16"
            },
            "Metadata": {
                "lzaLookup": {
                    "vpcName": "test-vpc",
                    "cidrBlock": "10.1.0.0/16"
                }
            }
        },
        "TestIgw": {
            "Type": "AWS::EC2::InternetGateway",
            "Properties": {},
            "Metadata": {
                "lzaLookup": {
                    "vpcName": "test-vpc"
                }
            }
        },
        "TestVPG": {
            "Type": "AWS::EC2::VPNGateway",
            "Properties": {
                "Type": "ipsec.1"
            },
            "Metadata": {
                "lzaLookup": {
                    "vpcName": "test-vpc"
                }
            }
        },
        "TestEgressGW": {
            "Type": "AWS::EC2::EgressOnlyInternetGateway",
            "Properties": {
                "VpcId": {
                    "Ref": "TestVPC"
                }
            },
            "Metadata": {
                "lzaLookup": {
                    "vpcName": "test-vpc"
                }
            }
        },
        "TestDHCPOptionsAssociation": {
            "Type": "AWS::EC2::VPCDHCPOptionsAssociation",
            "Properties": {
                "VpcId": {
                    "Ref": "TestVPC"
                },
                "DhcpOptionsId": "fakeDhcpOptionArn"
            },
            "Metadata": {
                "lzaLookup": {
                    "vpcName": "test-vpc",
                    "dhcpOptionsName": "test-dhcp-option"
                }
            }
        },
        "CGW": {
            "Type": "AWS::EC2::CustomerGateway",
            "Properties": {
                "Type": "ipsec.1",
                "BgpAsn": 65000,
                "IpAddress": "0000000"
            },
            "Metadata": {
                "lzaLookup": {
                    "vpcName": "test-vpc"
                }
            }
        },
        "FlowLog": {
            "Type": "AWS::EC2::FlowLog",
            "Properties": {
                "ResourceId": {
                    "Ref": "TestVPC"
                },
                "ResourceType": "VPC",
                "TrafficType": "ALL"
            },
            "Metadata": {
                "lzaLookup": {
                    "vpcName": "test-vpc",
                    "flowLogDestinationType": "cloud-watch-logs"
                }
            }
        },
        "TestRouteTable": {
            "Type": "AWS::EC2::RouteTable",
            "Properties": {
                "VpcId": { "Ref": "TestVPC" }
            },
            "Metadata": {
                "lzaLookup": {
                    "vpcName": "test-vpc",
                    "routeTableName": "test-route-table"
                }
            }
        },
        "TestLocalGatewayRouteTableVpcAssociation": {
            "Type": "AWS::EC2::LocalGatewayRouteTableVPCAssociation",
            "Properties": {
                "VpcId": { "Ref": "TestVPC" },
                "LocalGatewayRouteTableId": "fake-lg-rt-id"
            },
            "Metadata": {
                "lzaLookup": {
                    "routeTableName": "test-route-table",
                    "vpcName": "test-vpc",
                    "vpcAccount": "test-account"
                }
            }
        },
        "TestGatewayRouteTableAssociation": {
            "Type": "AWS::EC2::GatewayRouteTableAssociation",
            "Properties": {
                "RouteTableId": { "Ref": "TestRouteTable" },
                "GatewayId": { "Ref": "TestIgw" }
            },
            "Metadata": {
                "lzaLookup": {
                    "vpcName": "test-vpc",
                    "routeTableName": "test-route-table",
                    "associationType": "internet-gateway"
                }
            }
        },
        "TestRoute": {
            "Type": "AWS::EC2::Route",
            "Properties": {
                "RouteTableId": { "Ref": "TestRouteTable" },
                "DestinationCidrBlock": "0.0.0.0/0",
                "GatewayId": { "Ref": "TestIgw" }
            },
            "Metadata": {
                "lzaLookup": {
                    "vpcName": "test-vpc",
                    "routeTableName": "test-route-table",
                    "routeTableEntryName": "test-route",
                    "type": "gateway"
                }
            }
        },
        "TestPrefixListRoute": {
            "Type": "Custom::PrefixListRoute",
            "Properties": {
                "ServiceToken": "fake-service-token",
                "RouteTableId": { "Ref": "TestRouteTable" }
            },
            "Metadata": {
                "lzaLookup": {
                    "vpcName": "test-vpc",
                    "routeTableName": "test-route-table",
                    "routeTableEntryName": "test-prefix-route",
                    "type": "prefix-list"
                }
            }
        },
        "TestSubnet": {
            "Type": "AWS::EC2::Subnet",
            "Properties": {
                "VpcId": { "Ref": "TestVPC" },
                "CidrBlock": "10.0.0.0/24"
            },
            "Metadata": {
                "lzaLookup": {
                    "vpcName": "test-vpc",
                    "subnetName": "test-subnet"
                }
            }
        },
        "TestIpamSubnet": {
            "Type": "Custom::IpamSubnet",
            "Properties": {
                "ServiceToken": "fake-service-token",
                "VpcId": { "Ref": "TestVPC" }
            },
            "Metadata": {
                "lzaLookup": {
                    "vpcName": "test-vpc",
                    "subnetName": "test-ipam-subnet"
                }
            }
        },
        "TestRouteTableAssociation": {
            "Type": "AWS::EC2::SubnetRouteTableAssociation",
            "Properties": {
                "SubnetId": { "Ref": "TestSubnet" },
                "RouteTableId": { "Ref": "TestRouteTable" }
            },
            "Metadata": {
                "lzaLookup": {
                    "subnetName": "test-subnet",
                    "routeTableName": "test-route-table"
                }
            }
        },
        "TestNatGateway": {
            "Type": "AWS::EC2::NatGateway",
            "Properties": {
                "SubnetId": { "Ref": "TestSubnet" }
            },
            "Metadata": {
                "lzaLookup": {
                    "vpcName": "test-vpc",
                    "natGatewayName": "test-nat-gateway"
                }
            }
        },
        "TestTransitGatewayAttachment": {
            "Type": "AWS::EC2::TransitGatewayVpcAttachment",
            "Properties": {
                "VpcId": { "Ref": "TestVPC" },
                "TransitGatewayId": "fake-tgw-id"
            },
            "Metadata": {
                "lzaLookup": {
                    "vpcName": "test-vpc",
                    "transitGatewayName": "test-tgw",
                    "transitGatewayAttachmentName": "test-tgw-attachment"
                }
            }
        },
        "TestTgwAttachmentRole": {
            "Type": "AWS::IAM::Role",
            "Properties": {},
            "Metadata": {
                "lzaLookup": {
                    "roleName": "test-tgw-role"
                }
            }
        },
        "TestSubnetShare": {
            "Type": "AWS::RAM::ResourceShare",
            "Properties": {},
            "Metadata": {
                "lzaLookup": {
                    "vpcName": "test-vpc",
                    "subnetName": "test-subnet"
                }
            }
        },
        "TestSecurityGroup": {
            "Type": "AWS::EC2::SecurityGroup",
            "Properties": {
                "VpcId": { "Ref": "TestVPC" }
            },
            "Metadata": {
                "lzaLookup": {
                    "vpcName": "test-vpc",
                    "securityGroupName": "test-sg"
                }
            }
        },
        "TestSecurityGroupIngress": {
            "Type": "AWS::EC2::SecurityGroupIngress",
            "Properties": {
                "GroupId": { "Ref": "TestSecurityGroup" }
            },
            "Metadata": {
                "lzaLookup": {
                    "securityGroupName": "test-sg",
                    "ruleIndex": 0
                }
            }
        },
        "TestSecurityGroupEgress": {
            "Type": "AWS::EC2::SecurityGroupEgress",
            "Properties": {
                "GroupId": { "Ref": "TestSecurityGroup" }
            },
            "Metadata": {
                "lzaLookup": {
                    "securityGroupName": "test-sg",
                    "ruleIndex": 0
                }
            }
        },
        "TestNetworkAcl": {
            "Type": "AWS::EC2::NetworkAcl",
            "Properties": {
                "VpcId": { "Ref": "TestVPC" }
            },
            "Metadata": {
                "lzaLookup": {
                    "vpcName": "test-vpc",
                    "naclName": "test-nacl"
                }
            }
        },
        "TestNetworkAclIngressEntry": {
            "Type": "AWS::EC2::NetworkAclEntry",
            "Properties": {
                "NetworkAclId": { "Ref": "TestNetworkAcl" }
            },
            "Metadata": {
                "lzaLookup": {
                    "vpcName": "test-vpc",
                    "naclName": "test-nacl",
                    "ruleNumber": 100,
                    "type": "ingress"
                }
            }
        },
        "TestNetworkAclEgressEntry": {
            "Type": "AWS::EC2::NetworkAclEntry",
            "Properties": {
                "NetworkAclId": { "Ref": "TestNetworkAcl" }
            },
            "Metadata": {
                "lzaLookup": {
                    "vpcName": "test-vpc",
                    "naclName": "test-nacl",
                    "ruleNumber": 100,
                    "type": "egress"
                }
            }
        },
        "TestSubnetNetworkAclAssociation": {
            "Type": "AWS::EC2::SubnetNetworkAclAssociation",
            "Properties": {
                "SubnetId": { "Ref": "TestSubnet" },
                "NetworkAclId": { "Ref": "TestNetworkAcl" }
            },
            "Metadata": {
                "lzaLookup": {
                    "vpcName": "test-vpc",
                    "naclName": "test-nacl",
                    "subnetName": "test-subnet"
                }
            }
        },
        "TestGwlb": {
            "Type": "AWS::ElasticLoadBalancingV2::LoadBalancer",
            "Properties": {
                "Type": "gateway"
            },
            "Metadata": {
                "lzaLookup": {
                    "vpcName": "test-vpc",
                    "gwlbName": "test-gwlb"
                }
            }
        },
        "TestAlb": {
            "Type": "AWS::ElasticLoadBalancingV2::LoadBalancer",
            "Properties": {
                "Type": "application"
            },
            "Metadata": {
                "lzaLookup": {
                    "vpcName": "test-vpc",
                    "albName": "test-alb"
                }
            }
        },
        "TestNlb": {
            "Type": "AWS::ElasticLoadBalancingV2::LoadBalancer",
            "Properties": {
                "Type": "network"
            },
            "Metadata": {
                "lzaLookup": {
                    "vpcName": "test-vpc",
                    "nlbName": "test-nlb"
                }
            }
        }
    }
}